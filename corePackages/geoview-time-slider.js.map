{"version":3,"file":"corePackages/geoview-time-slider.js","mappings":"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","sources":["webpack://geoview-core/./src/api/plugin/footer-plugin.ts","webpack://geoview-core/../../common/temp/node_modules/.pnpm/@mui+material@5.15.10_@emotion+react@11.11.3_@emotion+styled@11.11.0_@types+react@18.2.55_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/NativeSelect/NativeSelect.js","webpack://geoview-core/../geoview-time-slider/src/time-slider-style.ts","webpack://geoview-core/../geoview-time-slider/src/time-slider.tsx","webpack://geoview-core/../geoview-time-slider/src/time-slider-panel.tsx","webpack://geoview-core/../geoview-time-slider/src/index.tsx"],"sourcesContent":["import { TypeTabs } from '@/ui/tabs/tabs';\nimport { AbstractPlugin } from './abstract-plugin';\nimport { logger } from '@/core/utils/logger';\n\n/** ******************************************************************************************************************************\n * Footer Plugin abstract class.\n */\nexport abstract class FooterPlugin extends AbstractPlugin {\n  // Store index of tab\n  value?: number;\n\n  // Store the footer props\n  footerProps?: TypeTabs;\n\n  /**\n   * Overridable function to create footer props content\n   * @returns TypeTabs The footer props content\n   */\n  onCreateContentProps(): TypeTabs {\n    // Override this to create the footer props..\n\n    // Return dummy content\n    return {\n      id: 'some-id',\n      value: this.value!,\n      label: 'Some label',\n      content: `<div>Content for Footer plugin on map id ${this.pluginProps.mapId} goes here...</div>`,\n    };\n  }\n\n  /**\n   * Called when a footer plugin is being added\n   */\n  onAdd(): void {\n    // Log\n    // No need to log, parent class does it well already via added() function.\n\n    // Set value to length of tabs(?)\n    this.value = this.map()?.footerBar.tabs.length;\n\n    // Create props\n    this.footerProps = this.onCreateContentProps();\n\n    // Create tab with the props\n    this.map()?.footerBar.createTab(this.footerProps);\n  }\n\n  /**\n   * Called when a footer plugin is being removed\n   */\n  onRemove(): void {\n    // Log\n    // No need to log, parent class does it well already via removed() function.\n\n    // Remove the footer tab\n    if (this.value) this.map()?.footerBar.removeTab(this.footerProps!.id);\n  }\n\n  /**\n   * Called when a footer plugin has been selected in the tabs\n   */\n  onSelected(): void {\n    // Log\n    logger.logTraceCore('FOOTER-PLUGIN - onSelected');\n\n    // TODO: Refactor - Move 'onSelected' in AbstractPlugin class so that AppBar can eventually benefit as well?\n\n    // Nothing else here.. but inherited FooterPlugins might override this method to do stuff when they are selected!\n  }\n}\n","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"children\", \"classes\", \"IconComponent\", \"input\", \"inputProps\", \"variant\"],\n  _excluded2 = [\"root\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { unstable_composeClasses as composeClasses } from '@mui/base/composeClasses';\nimport NativeSelectInput from './NativeSelectInput';\nimport formControlState from '../FormControl/formControlState';\nimport useFormControl from '../FormControl/useFormControl';\nimport ArrowDropDownIcon from '../internal/svg-icons/ArrowDropDown';\nimport Input from '../Input';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getNativeSelectUtilityClasses } from './nativeSelectClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getNativeSelectUtilityClasses, classes);\n};\nconst defaultInput = /*#__PURE__*/_jsx(Input, {});\n/**\n * An alternative to `<Select native />` with a much smaller bundle size footprint.\n */\nconst NativeSelect = /*#__PURE__*/React.forwardRef(function NativeSelect(inProps, ref) {\n  const props = useThemeProps({\n    name: 'MuiNativeSelect',\n    props: inProps\n  });\n  const {\n      className,\n      children,\n      classes: classesProp = {},\n      IconComponent = ArrowDropDownIcon,\n      input = defaultInput,\n      inputProps\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const muiFormControl = useFormControl();\n  const fcs = formControlState({\n    props,\n    muiFormControl,\n    states: ['variant']\n  });\n  const ownerState = _extends({}, props, {\n    classes: classesProp\n  });\n  const classes = useUtilityClasses(ownerState);\n  const otherClasses = _objectWithoutPropertiesLoose(classesProp, _excluded2);\n  return /*#__PURE__*/_jsx(React.Fragment, {\n    children: /*#__PURE__*/React.cloneElement(input, _extends({\n      // Most of the logic is implemented in `NativeSelectInput`.\n      // The `Select` component is a simple API wrapper to expose something better to play with.\n      inputComponent: NativeSelectInput,\n      inputProps: _extends({\n        children,\n        classes: otherClasses,\n        IconComponent,\n        variant: fcs.variant,\n        type: undefined\n      }, inputProps, input ? input.props.inputProps : {}),\n      ref\n    }, other, {\n      className: clsx(classes.root, input.props.className, className)\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? NativeSelect.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The option elements to populate the select with.\n   * Can be some `<option>` elements.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   * @default {}\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The icon that displays the arrow.\n   * @default ArrowDropDownIcon\n   */\n  IconComponent: PropTypes.elementType,\n  /**\n   * An `Input` element; does not have to be a material-ui specific `Input`.\n   * @default <Input />\n   */\n  input: PropTypes.element,\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select#attributes) applied to the `select` element.\n   */\n  inputProps: PropTypes.object,\n  /**\n   * Callback fired when a menu item is selected.\n   *\n   * @param {React.ChangeEvent<HTMLSelectElement>} event The event source of the callback.\n   * You can pull out the new value by accessing `event.target.value` (string).\n   */\n  onChange: PropTypes.func,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The `input` value. The DOM API casts this to a string.\n   */\n  value: PropTypes.any,\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf(['filled', 'outlined', 'standard'])\n} : void 0;\nNativeSelect.muiName = 'Select';\nexport default NativeSelect;","import { Theme } from '@mui/material/styles';\n\nexport const getSxClasses = (theme: Theme) => ({\n  panelHeaders: {\n    fontSize: theme.palette.geoViewFontSize.lg,\n    fontWeight: '600',\n    marginBottom: '20px',\n  },\n  rightPanelContainer: {\n    border: `2px solid ${theme.palette.primary.main}`,\n    borderRadius: '5px',\n    backgroundColor: theme.palette.common.white,\n  },\n  rightPanelBtnHolder: {\n    marginTop: '20px',\n    marginBottom: '9px',\n    boxShadow: '0px 12px 9px -13px #E0E0E0',\n  },\n  timeSliderInstructionsTitle: {\n    fontSize: theme.palette.geoViewFontSize.lg,\n    fontWeight: '600',\n    lineHeight: '1.5em',\n  },\n  timeSliderInstructionsBody: {\n    fontSize: '1rem',\n  },\n});\n","import { useTheme } from '@mui/material/styles';\nimport { FormControl, InputLabel, NativeSelect } from '@mui/material';\nimport { useTimeSliderLayers, useTimeSliderStoreActions } from 'geoview-core/src/core/stores';\nimport { getLocalizedMessage, getLocalizedValue } from 'geoview-core/src/core/utils/utilities';\nimport { getSxClasses } from './time-slider-style';\nimport { ConfigProps } from './time-slider-types';\n\ninterface TimeSliderPanelProps {\n  config: ConfigProps;\n  mapId: string;\n  layerPath: string;\n}\n\n/**\n * Creates a panel with time sliders\n *\n * @param {TimeSliderPanelProps} TimeSliderPanelProps time slider panel properties\n * @returns {JSX.Element} the slider panel\n */\nexport function TimeSlider(TimeSliderPanelProps: TimeSliderPanelProps) {\n  const { cgpv } = window;\n  const { config, layerPath, mapId } = TimeSliderPanelProps;\n  const { react, ui } = cgpv;\n  const { useState, useRef, useEffect } = react;\n  const {\n    Grid,\n    Slider,\n    Typography,\n    Checkbox,\n    Tooltip,\n    IconButton,\n    LockIcon,\n    LockOpenIcon,\n    ArrowLeftIcon,\n    PlayArrowIcon,\n    PauseIcon,\n    ArrowRightIcon,\n    SwitchRightIcon,\n    SwitchLeftIcon,\n  } = ui.elements;\n\n  const theme = useTheme();\n  const sxClasses = getSxClasses(theme);\n\n  const [isPlaying, setIsPlaying] = useState<boolean>(false);\n  const playIntervalRef = useRef<number>();\n\n  // References for play button\n  const sliderValueRef = useRef<number>();\n  const sliderDeltaRef = useRef<number>();\n\n  // Get actions and states from store\n  // TODO: evaluate best option to set value by layer path.... trough a getter?\n  const { setTitle, setDescription, setValues, setLocked, setReversed, setDelay, setFiltering } = useTimeSliderStoreActions();\n\n  // TODO: check performance as we should technically have one selector by constant\n  const {\n    title,\n    description,\n    name,\n    defaultValue,\n    range,\n    minAndMax,\n    field,\n    fieldAlias,\n    filtering,\n    singleHandle,\n    values,\n    delay,\n    locked,\n    reversed,\n  } = useTimeSliderLayers()[layerPath];\n\n  // slider config\n  useEffect(() => {\n    // TODO: add mechanism to initialize these values during store onInitialize\n    const sliderConfig = config?.sliders?.find((o: { layerPaths: string[] }) => o.layerPaths.includes(layerPath));\n    if (title === undefined) setTitle(layerPath, getLocalizedValue(sliderConfig?.title, mapId) || '');\n    if (description === undefined) setDescription(layerPath, getLocalizedValue(sliderConfig?.description, mapId) || '');\n    if (locked === undefined) setLocked(layerPath, sliderConfig?.locked !== undefined ? sliderConfig?.locked : false);\n    if (reversed === undefined) setReversed(layerPath, sliderConfig?.reversed !== undefined ? sliderConfig?.reversed : false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const timeStampRange = range.map((entry: string | number | Date) => new Date(entry).getTime());\n  // Check if range occurs in a single day or year\n  const timeDelta = minAndMax[1] - minAndMax[0];\n  const dayDelta = new Date(minAndMax[1]).getDate() - new Date(minAndMax[0]).getDate();\n  const yearDelta = new Date(minAndMax[1]).getFullYear() - new Date(minAndMax[0]).getFullYear();\n  let timeframe: string | undefined;\n  if (dayDelta === 0 && timeDelta < 86400000) timeframe = 'day';\n  else if (yearDelta === 0) timeframe = 'year';\n\n  let timeMarks: number[] = [];\n  if (range.length < 6 || singleHandle) timeMarks = timeStampRange;\n  else {\n    timeMarks = [\n      minAndMax[0],\n      new Date(range[Math.round(range.length / 4)]).getTime(),\n      new Date(range[Math.round(range.length / 2)]).getTime(),\n      new Date(range[Math.round((3 * range.length) / 4)]).getTime(),\n      minAndMax[1],\n    ];\n  }\n\n  const sliderMarks = [];\n  for (let i = 0; i < timeMarks.length; i++) {\n    sliderMarks.push({\n      value: timeMarks[i],\n      // If timeframe is a single day, use time. If it is a single year, drop year from dates.\n      label: timeframe\n        ? `${timeframe === 'day' ? new Date(timeMarks[i]).toTimeString().split(' ')[0] : new Date(timeMarks[i]).toISOString().slice(5, 10)}`\n        : new Date(timeMarks[i]).toISOString().slice(0, 10),\n    });\n  }\n\n  /**\n   * Create labels for values on slider\n   *\n   * @param {number} value The value of the slider handle\n   * @returns {string} A formatted time string or ISO date string\n   */\n  function valueLabelFormat(value: number): string {\n    // If timeframe is a single day, use time. If it is a single year, drop year from dates.\n    if (timeframe === 'day') return new Date(value).toTimeString().split(' ')[0].replace(/^0/, '');\n    if (timeframe === 'year') return new Date(value).toISOString().slice(5, 10);\n    return new Date(value).toISOString().slice(0, 10);\n  }\n\n  /**\n   * Moves the slider handle(s) back one increment\n   */\n  function moveBack(): void {\n    if (singleHandle) {\n      const currentIndex = timeStampRange.indexOf(values[0]);\n      let newIndex: number;\n      if (timeStampRange[currentIndex] === minAndMax[0]) newIndex = timeStampRange.length - 1;\n      else newIndex = currentIndex - 1;\n      setValues(layerPath, [timeStampRange[newIndex]]);\n    } else {\n      let [leftHandle, rightHandle] = values;\n      // If the current distance between slider handles is more than 1/5th of the range, reduce the difference to 1/5th range\n      if (!sliderDeltaRef.current) {\n        if (rightHandle - leftHandle > (minAndMax[1] - minAndMax[0]) / 5) {\n          sliderDeltaRef.current = (minAndMax[1] - minAndMax[0]) / 5;\n          setValues(layerPath, [rightHandle - sliderDeltaRef.current, rightHandle]);\n          return;\n        }\n        sliderDeltaRef.current = rightHandle - leftHandle;\n      }\n      // Check for edge cases and then set new slider values\n      if (locked && reversed) {\n        if (leftHandle === minAndMax[0]) leftHandle = rightHandle;\n        leftHandle -= sliderDeltaRef.current;\n        if (leftHandle < minAndMax[0]) [leftHandle] = minAndMax;\n      } else if (locked) {\n        rightHandle -= sliderDeltaRef.current!;\n        if (rightHandle < leftHandle) rightHandle = leftHandle;\n        if (rightHandle === leftHandle) [, rightHandle] = minAndMax;\n      } else {\n        if (rightHandle > sliderValueRef.current! && leftHandle === sliderValueRef.current) rightHandle = sliderValueRef.current;\n        else rightHandle -= sliderDeltaRef.current!;\n        if (rightHandle <= minAndMax[0]) [, rightHandle] = minAndMax;\n        leftHandle = rightHandle - sliderDeltaRef.current!;\n        if (leftHandle < minAndMax[0]) [leftHandle] = minAndMax;\n        if (leftHandle < sliderValueRef.current! && rightHandle > sliderValueRef.current!) leftHandle = sliderValueRef.current as number;\n      }\n      setValues(layerPath, [leftHandle, rightHandle]);\n    }\n  }\n\n  /**\n   * Moves the slider handle(s) forward one increment\n   */\n  function moveForward(): void {\n    if (singleHandle) {\n      const currentIndex = timeStampRange.indexOf(values[0]);\n      let newIndex: number;\n      if (timeStampRange[currentIndex] === minAndMax[1]) newIndex = 0;\n      else newIndex = currentIndex + 1;\n      setValues(layerPath, [timeStampRange[newIndex]]);\n    } else {\n      let [leftHandle, rightHandle] = values;\n      // If the current distance between slider handles is more than 1/5th of the range, reduce the difference to 1/5th range\n      if (!sliderDeltaRef.current) {\n        if (rightHandle - leftHandle > (minAndMax[1] - minAndMax[0]) / 5) {\n          sliderDeltaRef.current = (minAndMax[1] - minAndMax[0]) / 5;\n          setValues(layerPath, [leftHandle, leftHandle + sliderDeltaRef.current]);\n          return;\n        }\n        sliderDeltaRef.current = rightHandle - leftHandle;\n      }\n      // Check for edge cases and then set new slider values\n      if (locked && reversed) {\n        leftHandle += sliderDeltaRef.current!;\n        if (leftHandle >= rightHandle) [leftHandle] = minAndMax;\n      } else if (locked) {\n        if (rightHandle === minAndMax[1]) rightHandle = leftHandle;\n        rightHandle += sliderDeltaRef.current!;\n        if (rightHandle > minAndMax[1]) [, rightHandle] = minAndMax;\n      } else {\n        if (leftHandle < sliderValueRef.current! && rightHandle === sliderValueRef.current) leftHandle = sliderValueRef.current;\n        else leftHandle += sliderDeltaRef.current!;\n        if (leftHandle >= minAndMax[1]) [leftHandle] = minAndMax;\n        rightHandle = leftHandle + sliderDeltaRef.current!;\n        if (rightHandle > minAndMax[1]) [, rightHandle] = minAndMax;\n        if (rightHandle > sliderValueRef.current! && leftHandle < sliderValueRef.current!) rightHandle = sliderValueRef.current as number;\n      }\n      setValues(layerPath, [leftHandle, rightHandle]);\n    }\n  }\n\n  // #region USE EFFECT\n  useEffect(() => {\n    // If slider cycle is active, pause before advancing to next increment\n    if (isPlaying) {\n      if (reversed) playIntervalRef.current = window.setTimeout(() => moveBack(), delay);\n      else playIntervalRef.current = window.setTimeout(() => moveForward(), delay);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [values, filtering, reversed, locked]);\n\n  // When slider cycle is activated, advance to first increment without delay\n  useEffect(() => {\n    if (isPlaying) {\n      if (reversed) moveBack();\n      else moveForward();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isPlaying]);\n  // #endregion\n\n  // #region HANDLE FUNCTIONS\n  function handleBack(): void {\n    sliderValueRef.current = reversed ? values[1] : values[0];\n    moveBack();\n  }\n\n  function handleForward(): void {\n    [sliderValueRef.current] = values;\n    moveForward();\n  }\n\n  function handleLock(): void {\n    clearTimeout(playIntervalRef.current);\n    setLocked(layerPath, !locked);\n  }\n\n  function handlePlay(): void {\n    clearTimeout(playIntervalRef.current);\n    sliderValueRef.current = reversed ? values[1] : values[0];\n    setIsPlaying(!isPlaying);\n  }\n\n  function handleReverse(): void {\n    clearTimeout(playIntervalRef.current);\n    setReversed(layerPath, !reversed);\n    if (isPlaying) {\n      if (reversed) moveBack();\n      else moveForward();\n    }\n  }\n\n  function handleSliderChange(event: number | number[]): void {\n    clearTimeout(playIntervalRef.current);\n    setIsPlaying(false);\n    sliderDeltaRef.current = undefined;\n    setValues(layerPath, event as number[]);\n  }\n\n  function handleTimeChange(event: React.ChangeEvent<HTMLSelectElement>): void {\n    setDelay(layerPath, event.target.value as unknown as number);\n  }\n\n  function handleCheckbox(newValue: boolean): void {\n    setFiltering(layerPath, newValue);\n    if (!newValue) {\n      clearInterval(playIntervalRef.current);\n      setIsPlaying(false);\n    }\n  }\n  // #endregion\n\n  function returnLockTooltip(): string {\n    if (reversed) {\n      const text = locked\n        ? getLocalizedMessage(mapId, 'timeSlider.slider.unlockRight')\n        : getLocalizedMessage(mapId, 'timeSlider.slider.lockRight');\n      return text;\n    }\n    const text = locked\n      ? getLocalizedMessage(mapId, 'timeSlider.slider.unlockLeft')\n      : getLocalizedMessage(mapId, 'timeSlider.slider.lockLeft');\n    return text;\n  }\n\n  return (\n    <Grid>\n      <div style={sxClasses.rightPanelContainer}>\n        <Grid container sx={sxClasses.rightPanelBtnHolder}>\n          <Grid item xs={9}>\n            <Typography component=\"div\" sx={{ ...sxClasses.panelHeaders, paddingLeft: '20px', paddingTop: '10px' }}>\n              {`${title || name}`}\n              {timeframe !== undefined &&\n                ` (${timeframe === 'day' ? new Date(defaultValue).toLocaleDateString() : new Date(defaultValue).getFullYear()})`}\n            </Typography>\n          </Grid>\n          <Grid item xs={3}>\n            <div style={{ textAlign: 'right', marginRight: '25px' }}>\n              <Tooltip\n                title={\n                  filtering\n                    ? getLocalizedMessage(mapId, 'timeSlider.slider.disableFilter')\n                    : getLocalizedMessage(mapId, 'timeSlider.slider.enableFilter')\n                }\n                placement=\"top\"\n                enterDelay={1000}\n              >\n                <Checkbox checked={filtering} onChange={(event, child) => handleCheckbox(child)} />\n              </Tooltip>\n            </div>\n          </Grid>\n        </Grid>\n        <Grid item xs={12}>\n          <div style={{ textAlign: 'center', paddingTop: '20px' }}>\n            <Slider\n              sliderId={layerPath}\n              mapId={mapId}\n              style={{ width: '80%', color: 'primary' }}\n              min={minAndMax[0]}\n              max={minAndMax[1]}\n              defaultValue={defaultValue}\n              value={values}\n              valueLabelFormat={(value) => valueLabelFormat(value)}\n              marks={sliderMarks}\n              step={singleHandle ? null : 0.1}\n              customOnChange={(event) => handleSliderChange(event)}\n              key={values[1] ? values[1] + values[0] : values[0]}\n            />\n          </div>\n        </Grid>\n        <Grid item xs={12}>\n          <div style={{ textAlign: 'center', paddingTop: '20px' }}>\n            {!singleHandle && (\n              <IconButton\n                aria-label={returnLockTooltip()}\n                tooltip={returnLockTooltip()}\n                tooltipPlacement=\"top\"\n                onClick={() => handleLock()}\n              >\n                {locked ? <LockIcon /> : <LockOpenIcon />}\n              </IconButton>\n            )}\n            <IconButton\n              aria-label={getLocalizedMessage(mapId, 'timeSlider.slider.back') as string}\n              tooltip=\"timeSlider.slider.back\"\n              tooltipPlacement=\"top\"\n              disabled={isPlaying || !filtering}\n              onClick={() => handleBack()}\n            >\n              <ArrowLeftIcon />\n            </IconButton>\n            <IconButton\n              aria-label={\n                isPlaying\n                  ? (getLocalizedMessage(mapId, 'timeSlider.slider.pauseAnimation') as string)\n                  : (getLocalizedMessage(mapId, 'timeSlider.slider.playAnimation') as string)\n              }\n              tooltip={isPlaying ? 'timeSlider.slider.pauseAnimation' : 'timeSlider.slider.playAnimation'}\n              tooltipPlacement=\"top\"\n              disabled={!filtering}\n              onClick={() => handlePlay()}\n            >\n              {!isPlaying ? <PlayArrowIcon /> : <PauseIcon />}\n            </IconButton>\n            <IconButton\n              aria-label={getLocalizedMessage(mapId, 'timeSlider.slider.forward') as string}\n              tooltip=\"timeSlider.slider.forward\"\n              tooltipPlacement=\"top\"\n              disabled={isPlaying || !filtering}\n              onClick={() => handleForward()}\n            >\n              <ArrowRightIcon />\n            </IconButton>\n            <IconButton\n              aria-label={getLocalizedMessage(mapId, 'timeSlider.slider.changeDirection') as string}\n              tooltip=\"timeSlider.slider.changeDirection\"\n              tooltipPlacement=\"top\"\n              onClick={() => handleReverse()}\n            >\n              {reversed ? <SwitchRightIcon /> : <SwitchLeftIcon />}\n            </IconButton>\n            <FormControl sx={{ width: '150px' }}>\n              <InputLabel variant=\"standard\">{getLocalizedMessage(mapId, 'timeSlider.slider.timeDelay')}</InputLabel>\n              <NativeSelect\n                defaultValue={delay}\n                inputProps={{\n                  name: 'timeDelay',\n                  onChange: (event) => handleTimeChange(event),\n                }}\n              >\n                <option value={500}>0.5s</option>\n                <option value={750}>0.75s</option>\n                <option value={1000}>1.0s</option>\n                <option value={1500}>1.5s</option>\n                <option value={2000}>2.0s</option>\n                <option value={3000}>3.0s</option>\n                <option value={5000}>5.0s</option>\n              </NativeSelect>\n            </FormControl>\n          </div>\n        </Grid>\n        {description && (\n          <Grid item xs={12}>\n            <Typography component=\"div\" sx={{ px: '20px', py: '5px' }}>\n              {description}\n            </Typography>\n          </Grid>\n        )}\n        {fieldAlias && (\n          <Grid item xs={12}>\n            <Typography component=\"div\" sx={{ px: '20px', py: '5px' }}>\n              {`${fieldAlias} (${field})`}\n            </Typography>\n          </Grid>\n        )}\n      </div>\n    </Grid>\n  );\n}\n","import { useTheme } from '@mui/material/styles';\nimport { TypeWindow, getLocalizedMessage } from 'geoview-core';\nimport { LayerListEntry, Layout } from 'geoview-core/src/core/components/common';\nimport { useMapVisibleLayers, useTimeSliderLayers } from 'geoview-core/src/core/stores';\nimport { Paper, Typography } from 'geoview-core/src/ui';\nimport { logger } from 'geoview-core/src/core/utils/logger';\n\nimport { TimeSlider } from './time-slider';\nimport { ConfigProps } from './time-slider-types';\nimport { getSxClasses } from './time-slider-style';\n\ninterface TypeTimeSliderProps {\n  configObj: ConfigProps;\n  mapId: string;\n}\n\n/**\n * Time slider tab\n *\n * @param {TypeTimeSliderProps} props The properties passed to slider\n * @returns {JSX.Element} the time slider tab\n */\nexport function TimeSliderPanel(props: TypeTimeSliderProps): JSX.Element {\n  const { mapId, configObj } = props;\n  const { cgpv } = window as TypeWindow;\n  const { react } = cgpv;\n  const { useState, useCallback, useMemo, useEffect } = react;\n\n  const theme = useTheme();\n  const sxClasses = getSxClasses(theme);\n\n  // internal state\n  const [selectedLayerPath, setSelectedLayerPath] = useState<string>();\n\n  // get values from store\n  const visibleLayers = useMapVisibleLayers() as string[];\n  const timeSliderLayers = useTimeSliderLayers();\n\n  /**\n   * handle Layer list when clicked on each layer.\n   * @param {LayerListEntry} layer layer clicked by the user.\n   */\n  const handleClickLayerList = useCallback((layer: LayerListEntry) => {\n    // Log\n    logger.logTraceUseCallback('TIME-SLIDER-PANEL - handleLayerList');\n\n    // Set the layer path\n    setSelectedLayerPath(layer.layerPath);\n  }, []);\n\n  // Reacts when the array of layer data updates\n  const memoLayersList = useMemo(() => {\n    // Log\n    logger.logTraceUseMemo('TIME-SLIDER-PANEL - memoLayersList', timeSliderLayers);\n\n    // Return the layers\n    return visibleLayers\n      .map((layerPath) => {\n        return { layerPath, timeSliderLayerInfo: timeSliderLayers[layerPath] };\n      })\n      .filter((layer) => layer && layer.timeSliderLayerInfo)\n      .map((layer) => {\n        return {\n          layerName: layer.timeSliderLayerInfo.name,\n          layerPath: layer.layerPath,\n          tooltip: layer.timeSliderLayerInfo.name,\n          layerStatus: 'loaded',\n          queryStatus: 'processed',\n        } as LayerListEntry;\n      });\n  }, [visibleLayers, timeSliderLayers]);\n\n  useEffect(() => {\n    // Log\n    logger.logTraceUseEffect('TIME-SLIDER-PANEL - memoLayersList', memoLayersList, selectedLayerPath);\n\n    // If the selected layer path isn't in the list of layers possible, clear it\n    if (selectedLayerPath && !memoLayersList.map((layer) => layer.layerPath).includes(selectedLayerPath)) {\n      // Clear the selected layer path\n      setSelectedLayerPath('');\n    }\n  }, [memoLayersList, selectedLayerPath]);\n\n  return (\n    <Layout selectedLayerPath={selectedLayerPath} onLayerListClicked={handleClickLayerList} layerList={memoLayersList}>\n      {selectedLayerPath && <TimeSlider mapId={mapId} config={configObj} layerPath={selectedLayerPath} key={selectedLayerPath} />}\n      {!selectedLayerPath && (\n        <Paper sx={{ padding: '2rem' }}>\n          <Typography variant=\"h3\" gutterBottom sx={sxClasses.timeSliderInstructionsTitle}>\n            {getLocalizedMessage(mapId, 'timeSlider.instructions')}\n          </Typography>\n          <Typography component=\"p\" sx={sxClasses.timeSliderInstructionsBody}>\n            {getLocalizedMessage(mapId, 'timeSlider.instructions')}\n          </Typography>\n        </Paper>\n      )}\n    </Layout>\n  );\n}\n","import { AnySchemaObject, api, Cast, toJsonObject, TypeJsonObject, TypeTabs } from 'geoview-core';\nimport { TimeSliderIcon } from 'geoview-core/src/ui';\nimport { FooterPlugin } from 'geoview-core/src/api/plugin/footer-plugin';\n\nimport { TimeSliderPanel } from './time-slider-panel';\nimport schema from '../schema.json';\nimport defaultConfig from '../default-config-time-slider-panel.json';\nimport { SliderProps } from './time-slider-types';\n\nexport interface LayerProps {\n  layerPath: string;\n  layerName: string;\n}\nexport interface SliderFilterProps {\n  title: string;\n  description: string;\n  range: string[];\n  defaultValue: string;\n  minAndMax: number[];\n  field: string;\n  singleHandle: boolean;\n  values: number[];\n  filtering: boolean;\n  delay: number;\n  locked: boolean;\n  reversed: boolean;\n}\n\n/**\n * Time slider plugin\n */\nclass TimeSliderPlugin extends FooterPlugin {\n  /**\n   * Return the schema that is defined for this package\n   *\n   * @returns {AnySchemaObject} returns the schema for this package\n   */\n  schema = (): AnySchemaObject => schema;\n\n  /**\n   * Return the default config for this package\n   *\n   * @returns {TypeJsonObject} the default config\n   */\n  defaultConfig = (): TypeJsonObject => toJsonObject(defaultConfig);\n\n  /**\n   * Translations object to inject to the viewer translations\n   */\n  translations = toJsonObject({\n    en: {\n      timeSlider: {\n        title: 'Time Slider',\n        panel: {\n          noLayers: 'No layers with temporal data',\n        },\n        slider: {\n          unlockRight: 'Unlock right handle',\n          unlockLeft: 'Unlock left handle',\n          lockRight: 'Lock right handle',\n          lockLeft: 'Lock left handle',\n          disableFilter: 'Disable Filtering',\n          enableFilter: 'Enable Filtering',\n          pauseAnimation: 'Pause animation',\n          playAnimation: 'Play animation',\n          back: 'Back',\n          forward: 'Forward',\n          changeDirection: 'Change animation direction',\n          timeDelay: 'Animation time delay',\n        },\n        instructions: 'Time Slider Instructions',\n      },\n    },\n    fr: {\n      timeSlider: {\n        title: 'Curseur Temporel',\n        panel: {\n          noLayers: 'Pas de couches avec des données temporelles',\n        },\n        slider: {\n          unlockRight: 'Déverrouiller la poignée droite',\n          unlockLeft: 'Déverrouiller la poignée gauche',\n          lockRight: 'Verrouiller la poignée droite',\n          lockLeft: 'Verrouiller la poignée gauche',\n          disableFilter: 'Désactiver le filtrage',\n          enableFilter: 'Activer le filtrage',\n          pauseAnimation: `Pause de l'animation`,\n          playAnimation: `Jouer l'animation`,\n          back: 'Retour',\n          forward: 'En avant',\n          changeDirection: `Changer la direction de l'animation`,\n          timeDelay: `Délai d'animation`,\n        },\n        instructions: 'Instructions Curseur Temporel',\n      },\n    },\n  });\n\n  onCreateContentProps = (): TypeTabs => {\n    // Set custom time dimension if applicable\n    this.configObj.sliders.forEach((obj: SliderProps) => {\n      if (obj.temporalDimension) {\n        api.maps[this.pluginProps.mapId].layer\n          .geoviewLayer(obj.layerPaths[0])\n          .setTemporalDimension(obj.layerPaths[0], obj.temporalDimension);\n      }\n    });\n\n    return {\n      id: 'time-slider',\n      value: this.value!,\n      label: 'timeSlider.title',\n      icon: <TimeSliderIcon />,\n      content: <TimeSliderPanel mapId={this.pluginProps.mapId} configObj={this.configObj} />,\n    };\n  };\n}\n\nexport default TimeSliderPlugin;\n\n// Keep a reference to the Time Slider Plugin as part of the geoviewPlugins property stored in the window object\nwindow.geoviewPlugins = window.geoviewPlugins || {};\nwindow.geoviewPlugins['time-slider'] = Cast<TimeSliderPlugin>(TimeSliderPlugin);\n"],"names":["FooterPlugin","_AbstractPlugin","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_defineProperty","_assertThisInitialized","_inherits","_createClass","key","value","id","this","label","content","pluginProps","mapId","_this$map","_this$map2","map","footerBar","tabs","footerProps","onCreateContentProps","createTab","_this$map3","removeTab","logger","logTraceCore","AbstractPlugin","_excluded","_excluded2","defaultInput","Input","NativeSelect","inProps","ref","props","useThemeProps","name","className","children","classes","classesProp","IconComponent","ArrowDropDown","input","inputProps","other","muiFormControl","useFormControl","fcs","formControlState","states","ownerState","composeClasses","c","root","useUtilityClasses","otherClasses","inputComponent","NativeSelectInput","variant","type","undefined","clsx","muiName","getSxClasses","theme","panelHeaders","fontSize","palette","geoViewFontSize","lg","fontWeight","marginBottom","rightPanelContainer","border","primary","main","borderRadius","backgroundColor","common","white","rightPanelBtnHolder","marginTop","boxShadow","timeSliderInstructionsTitle","lineHeight","timeSliderInstructionsBody","TimeSlider","TimeSliderPanelProps","cgpv","window","config","layerPath","react","ui","useState","useRef","useEffect","_ui$elements","elements","Grid","Slider","Typography","Checkbox","Tooltip","IconButton","LockIcon","LockOpenIcon","ArrowLeftIcon","PlayArrowIcon","PauseIcon","ArrowRightIcon","SwitchRightIcon","SwitchLeftIcon","useTheme","sxClasses","_useState","_useState2","_slicedToArray","isPlaying","setIsPlaying","playIntervalRef","sliderValueRef","sliderDeltaRef","_useTimeSliderStoreAc","useTimeSliderStoreActions","setTitle","setDescription","setValues","setLocked","setReversed","setDelay","setFiltering","_useTimeSliderLayers$","useTimeSliderLayers","title","description","defaultValue","range","minAndMax","field","fieldAlias","filtering","singleHandle","values","delay","locked","reversed","_config$sliders","sliderConfig","sliders","find","o","layerPaths","includes","getLocalizedValue","timeframe","timeStampRange","entry","Date","getTime","timeDelta","dayDelta","getDate","yearDelta","getFullYear","timeMarks","Math","round","sliderMarks","i","push","toTimeString","split","toISOString","slice","moveBack","newIndex","currentIndex","indexOf","_values","leftHandle","rightHandle","current","moveForward","_values2","returnLockTooltip","getLocalizedMessage","setTimeout","_jsx","_jsxs","style","container","sx","item","xs","component","_objectSpread","paddingLeft","paddingTop","toLocaleDateString","textAlign","marginRight","placement","enterDelay","checked","onChange","event","child","newValue","clearInterval","sliderId","width","color","min","max","valueLabelFormat","replace","marks","step","customOnChange","clearTimeout","handleSliderChange","tooltip","tooltipPlacement","onClick","disabled","_values3","FormControl","InputLabel","target","handleTimeChange","px","py","TimeSliderPanel","configObj","useCallback","useMemo","selectedLayerPath","setSelectedLayerPath","visibleLayers","useMapVisibleLayers","timeSliderLayers","handleClickLayerList","layer","logTraceUseCallback","memoLayersList","logTraceUseMemo","timeSliderLayerInfo","filter","layerName","layerStatus","queryStatus","logTraceUseEffect","Layout","onLayerListClicked","layerList","Paper","padding","gutterBottom","TimeSliderPlugin","_FooterPlugin","schema","toJsonObject","defaultConfig","en","timeSlider","panel","noLayers","slider","unlockRight","unlockLeft","lockRight","lockLeft","disableFilter","enableFilter","pauseAnimation","playAnimation","back","forward","changeDirection","timeDelay","instructions","fr","forEach","obj","temporalDimension","api","maps","geoviewLayer","setTemporalDimension","icon","TimeSliderIcon","geoviewPlugins","Cast"],"sourceRoot":""}